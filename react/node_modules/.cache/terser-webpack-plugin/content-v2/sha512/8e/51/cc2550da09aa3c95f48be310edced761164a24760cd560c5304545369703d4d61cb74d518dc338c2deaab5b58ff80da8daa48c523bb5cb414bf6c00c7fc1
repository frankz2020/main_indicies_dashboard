{"map":"{\"version\":3,\"sources\":[\"C:/Users/frank/Documents/Python Scripts/in_progress/dev_mkt_watchboard/v1/react/src/components/Chart.js\",\"C:/Users/frank/Documents/Python Scripts/in_progress/dev_mkt_watchboard/v1/react/src/App.js\",\"C:/Users/frank/Documents/Python Scripts/in_progress/dev_mkt_watchboard/v1/react/src/index.js\"],\"names\":[\"formatDate\",\"dateString\",\"date\",\"Date\",\"concat\",\"getFullYear\",\"getMonth\",\"toString\",\"padStart\",\"getDate\",\"Chart\",\"_ref\",\"ticker\",\"data\",\"setData\",\"useState\",\"title\",\"setTitle\",\"metrics\",\"setMetrics\",\"useEffect\",\"axios\",\"get\",\"process\",\"then\",\"response\",\"responseData\",\"name\",\"parsedData\",\"JSON\",\"parse\",\"prices\",\"dates\",\"map\",\"item\",\"values\",\"Close\",\"latestPrice\",\"length\",\"latestChange\",\"lastYear\",\"lastPriceLastYear\",\"findIndex\",\"ytdChange\",\"high\",\"Math\",\"max\",\"highDate\",\"indexOf\",\"low\",\"min\",\"lowDate\",\"x\",\"y\",\"type\",\"mode\",\"catch\",\"error\",\"console\",\"React\",\"createElement\",\"className\",\"Plot\",\"layout\",\"autosize\",\"height\",\"margin\",\"l\",\"r\",\"b\",\"t\",\"pad\",\"useResizeHandler\",\"style\",\"width\",\"toFixed\",\"color\",\"App\",\"tickers\",\"src\",\"alt\",\"key\",\"ReactDOM\",\"render\",\"StrictMode\",\"document\",\"getElementById\"],\"mappings\":\"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\",\"sourcesContent\":[\"import React, { useEffect, useState } from 'react';\\r\\nimport Plot from 'react-plotly.js';\\r\\nimport axios from 'axios';\\r\\nimport './Chart.css';\\r\\n\\r\\nfunction formatDate(dateString) {\\r\\n  const date = new Date(dateString);\\r\\n  return `${date.getFullYear()}/${(date.getMonth() + 1).toString().padStart(2, '0')}/${date.getDate().toString().padStart(2, '0')}`;\\r\\n}\\r\\n\\r\\nfunction Chart({ ticker }) {\\r\\n  const [data, setData] = useState([]);\\r\\n  const [title, setTitle] = useState(\\\"\\\");\\r\\n  const [metrics, setMetrics] = useState({});\\r\\n\\r\\n  useEffect(() => {\\r\\n    axios.get(`${process.env.REACT_APP_API_BASE_URL}/data/${ticker}`)\\r\\n    .then(response => {\\r\\n\\r\\n      const responseData = response.data;\\r\\n      const name = responseData.name;\\r\\n      const parsedData = JSON.parse(responseData.prices);\\r\\n      const dates = parsedData.map(item => item.Date);\\r\\n      const values = parsedData.map(item => item.Close);\\r\\n\\r\\n      // Calculate metrics\\r\\n      const latestPrice = values[values.length - 1];\\r\\n      const latestChange = ((values[values.length - 1] - values[values.length - 2]) / values[values.length - 2]) * 100;\\r\\n \\r\\n      // Find the last trading day of the previous year\\r\\n      const lastYear = new Date().getFullYear() - 1;\\r\\n      const lastPriceLastYear = values[dates.findIndex(date => new Date(date).getFullYear() > lastYear) - 1];\\r\\n\\r\\n      // Calculate YTD\\r\\n      const ytdChange = ((latestPrice - lastPriceLastYear) / lastPriceLastYear) * 100;\\r\\n      \\r\\n      //Other Metrics\\r\\n      const high = Math.max(...values);\\r\\n      const highDate = dates[values.indexOf(high)];\\r\\n      const low = Math.min(...values);\\r\\n      const lowDate = dates[values.indexOf(low)];\\r\\n\\r\\n      setData([\\r\\n        {\\r\\n          x: dates,\\r\\n          y: values,\\r\\n          type: 'scatter',\\r\\n          mode: 'lines', // Changed to 'lines' to remove ticks\\r\\n        }\\r\\n      ]);\\r\\n      setTitle(name); // Set the chart title\\r\\n      setMetrics({ latestPrice, latestChange, ytdChange, high, highDate, low, lowDate });\\r\\n    })\\r\\n    .catch(error => {\\r\\n      console.error('Error fetching data:', error);\\r\\n    });\\r\\n  }, [ticker]);\\r\\n  \\r\\n\\r\\n  return (\\r\\n    <div className=\\\"chart\\\">\\r\\n      <Plot\\r\\n        data={data}\\r\\n        layout={{\\r\\n          autosize: true, // Allows the chart to resize automatically\\r\\n          title: title,\\r\\n          height: 200,\\r\\n          margin: {\\r\\n            l: 35, r: 35, b: 35, t: 35, // Adjust margins to fit the container\\r\\n            pad: 4\\r\\n          }\\r\\n        }}\\r\\n        useResizeHandler={true} // Ensures the chart resizes with the container\\r\\n        style={{ width: \\\"100%\\\", height: \\\"100%\\\" }} // Fill the container\\r\\n      />\\r\\n      <div className=\\\"chart-metrics\\\">\\r\\n        <p>Latest price: <span>{metrics.latestPrice ? metrics.latestPrice.toFixed(2) : 'N/A'}</span></p>\\r\\n        <p>Latest change: <span style={{ color: metrics.latestChange > 0 ? 'red' : 'green' }}>\\r\\n          {metrics.latestChange ? metrics.latestChange.toFixed(2) : 'N/A'}%\\r\\n        </span></p>\\r\\n        <p>YTD: <span style={{ color: metrics.ytdChange > 0 ? 'red' : 'green' }}>\\r\\n          {metrics.ytdChange ? metrics.ytdChange.toFixed(2) : 'N/A'}%\\r\\n        </span></p>\\r\\n        <p>High: <span>{metrics.high ? metrics.high.toFixed(2) : 'N/A'}</span> on <span>{metrics.highDate ? formatDate(metrics.highDate) : 'N/A'}</span></p>\\r\\n        <p>Low: <span>{metrics.low ? metrics.low.toFixed(2) : 'N/A'}</span> on <span>{metrics.lowDate ? formatDate(metrics.lowDate) : 'N/A'}</span></p>\\r\\n      </div>\\r\\n    </div>\\r\\n  );\\r\\n}\\r\\n\\r\\nexport default Chart;\",\"import React, { useState } from 'react';\\r\\nimport Chart from './components/Chart';\\r\\nimport './App.css'; \\r\\n\\r\\nfunction App() {\\r\\n  const [tickers] = useState([\\r\\n    '^GSPC', '^IXIC', '^DJI',\\r\\n    '000002.SS', '399107.SZ', '^HSI',\\r\\n    '^STOXX', '^FTSE', '^GDAXI',\\r\\n    'GC=F', 'HG=F', 'Missing Copper/Gold Ratio',\\r\\n    'CL=F', 'BZ=F', 'NG=F',\\r\\n    'DX-Y.NYB', 'EURCNY=X', 'JPYCNY=X',\\r\\n    'CNY=X', 'HKDCNY=X', 'JPY=X'\\r\\n  ]);\\r\\n\\r\\n  return (\\r\\n    <div>\\r\\n      <header className=\\\"app-header\\\">\\r\\n        <div className=\\\"header-content\\\">\\r\\n          <img src=\\\"logo.png\\\" alt=\\\"Logo\\\" className=\\\"logo\\\" />\\r\\n          <div>\\r\\n            <h1 className=\\\"title\\\">Market Dashboard</h1>\\r\\n            <h2 className=\\\"subtitle\\\">by Frank Zhao</h2>\\r\\n          </div>\\r\\n        </div>\\r\\n      </header>\\r\\n\\r\\n      <div className=\\\"instructions\\\">\\r\\n        <p>\\r\\n          本程序用于跟踪各市场指标，数据非实时更新，展示皆为收盘价，仅供参考。部分图表未完成，请待后续更新；后续亦有更多功能更新。\\r\\n          全部为非工作时间完成，更新较慢请谅解。如有问题或修改建议欢迎联系微信：frankz2020\\r\\n        </p>\\r\\n      </div>\\r\\n      \\r\\n      <div className=\\\"chart-grid\\\">\\r\\n        {tickers.map(ticker => (\\r\\n          <Chart key={ticker} ticker={ticker} />\\r\\n        ))}\\r\\n      </div>\\r\\n    </div>\\r\\n  );\\r\\n}\\r\\n\\r\\nexport default App;\\r\\n\",\"import React from 'react';\\r\\nimport ReactDOM from 'react-dom';\\r\\nimport App from './App';\\r\\nimport './index.css'; // If you have any global CSS\\r\\n\\r\\nReactDOM.render(\\r\\n  <React.StrictMode>\\r\\n    <App />\\r\\n  </React.StrictMode>,\\r\\n  document.getElementById('root')\\r\\n);\\r\\n\"]}","code":"(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{11:function(e,t,a){e.exports=a(30)},27:function(e,t,a){},28:function(e,t,a){},29:function(e,t,a){},30:function(e,t,a){\"use strict\";a.r(t);var n=a(1),l=a.n(n),c=a(9),r=a.n(c),s=a(10),o=a.n(s),i=a(32);a(27);function m(e){const t=new Date(e);return\"\".concat(t.getFullYear(),\"/\").concat((t.getMonth()+1).toString().padStart(2,\"0\"),\"/\").concat(t.getDate().toString().padStart(2,\"0\"))}var h=function(e){let{ticker:t}=e;const[a,c]=Object(n.useState)([]),[r,s]=Object(n.useState)(\"\"),[h,d]=Object(n.useState)({});return Object(n.useEffect)(()=>{i.a.get(\"\".concat(\"https://market-dashboard-419006.df.r.appspot.com/\",\"/data/\").concat(t)).then(e=>{const t=e.data,a=t.name,n=JSON.parse(t.prices),l=n.map(e=>e.Date),r=n.map(e=>e.Close),o=r[r.length-1],i=(r[r.length-1]-r[r.length-2])/r[r.length-2]*100,m=(new Date).getFullYear()-1,h=r[l.findIndex(e=>new Date(e).getFullYear()>m)-1],g=(o-h)/h*100,u=Math.max(...r),p=l[r.indexOf(u)],E=Math.min(...r),N=l[r.indexOf(E)];c([{x:l,y:r,type:\"scatter\",mode:\"lines\"}]),s(a),d({latestPrice:o,latestChange:i,ytdChange:g,high:u,highDate:p,low:E,lowDate:N})}).catch(e=>{console.error(\"Error fetching data:\",e)})},[t]),l.a.createElement(\"div\",{className:\"chart\"},l.a.createElement(o.a,{data:a,layout:{autosize:!0,title:r,height:200,margin:{l:35,r:35,b:35,t:35,pad:4}},useResizeHandler:!0,style:{width:\"100%\",height:\"100%\"}}),l.a.createElement(\"div\",{className:\"chart-metrics\"},l.a.createElement(\"p\",null,\"Latest price: \",l.a.createElement(\"span\",null,h.latestPrice?h.latestPrice.toFixed(2):\"N/A\")),l.a.createElement(\"p\",null,\"Latest change: \",l.a.createElement(\"span\",{style:{color:h.latestChange>0?\"red\":\"green\"}},h.latestChange?h.latestChange.toFixed(2):\"N/A\",\"%\")),l.a.createElement(\"p\",null,\"YTD: \",l.a.createElement(\"span\",{style:{color:h.ytdChange>0?\"red\":\"green\"}},h.ytdChange?h.ytdChange.toFixed(2):\"N/A\",\"%\")),l.a.createElement(\"p\",null,\"High: \",l.a.createElement(\"span\",null,h.high?h.high.toFixed(2):\"N/A\"),\" on \",l.a.createElement(\"span\",null,h.highDate?m(h.highDate):\"N/A\")),l.a.createElement(\"p\",null,\"Low: \",l.a.createElement(\"span\",null,h.low?h.low.toFixed(2):\"N/A\"),\" on \",l.a.createElement(\"span\",null,h.lowDate?m(h.lowDate):\"N/A\"))))};a(28);var d=function(){const[e]=Object(n.useState)([\"^GSPC\",\"^IXIC\",\"^DJI\",\"000002.SS\",\"399107.SZ\",\"^HSI\",\"^STOXX\",\"^FTSE\",\"^GDAXI\",\"GC=F\",\"HG=F\",\"Missing Copper/Gold Ratio\",\"CL=F\",\"BZ=F\",\"NG=F\",\"DX-Y.NYB\",\"EURCNY=X\",\"JPYCNY=X\",\"CNY=X\",\"HKDCNY=X\",\"JPY=X\"]);return l.a.createElement(\"div\",null,l.a.createElement(\"header\",{className:\"app-header\"},l.a.createElement(\"div\",{className:\"header-content\"},l.a.createElement(\"img\",{src:\"logo.png\",alt:\"Logo\",className:\"logo\"}),l.a.createElement(\"div\",null,l.a.createElement(\"h1\",{className:\"title\"},\"Market Dashboard\"),l.a.createElement(\"h2\",{className:\"subtitle\"},\"by Frank Zhao\")))),l.a.createElement(\"div\",{className:\"instructions\"},l.a.createElement(\"p\",null,\"\\u672c\\u7a0b\\u5e8f\\u7528\\u4e8e\\u8ddf\\u8e2a\\u5404\\u5e02\\u573a\\u6307\\u6807\\uff0c\\u6570\\u636e\\u975e\\u5b9e\\u65f6\\u66f4\\u65b0\\uff0c\\u5c55\\u793a\\u7686\\u4e3a\\u6536\\u76d8\\u4ef7\\uff0c\\u4ec5\\u4f9b\\u53c2\\u8003\\u3002\\u90e8\\u5206\\u56fe\\u8868\\u672a\\u5b8c\\u6210\\uff0c\\u8bf7\\u5f85\\u540e\\u7eed\\u66f4\\u65b0\\uff1b\\u540e\\u7eed\\u4ea6\\u6709\\u66f4\\u591a\\u529f\\u80fd\\u66f4\\u65b0\\u3002 \\u5168\\u90e8\\u4e3a\\u975e\\u5de5\\u4f5c\\u65f6\\u95f4\\u5b8c\\u6210\\uff0c\\u66f4\\u65b0\\u8f83\\u6162\\u8bf7\\u8c05\\u89e3\\u3002\\u5982\\u6709\\u95ee\\u9898\\u6216\\u4fee\\u6539\\u5efa\\u8bae\\u6b22\\u8fce\\u8054\\u7cfb\\u5fae\\u4fe1\\uff1afrankz2020\")),l.a.createElement(\"div\",{className:\"chart-grid\"},e.map(e=>l.a.createElement(h,{key:e,ticker:e}))))};a(29);r.a.render(l.a.createElement(l.a.StrictMode,null,l.a.createElement(d,null)),document.getElementById(\"root\"))}},[[11,1,2]]]);","extractedComments":[]}